<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.springGroupS.dao.ScheduleDAO">
	
	<select id="getScheduleList" resultType="com.spring.springGroupS.vo.ScheduleVO">
		<!-- select * from schedule where mid=#{mid} and substring(sDate, 1, 7)=#{ym} order by sDate; -->
		select idx,mid,sDate,part,content, count(part) as partCnt from schedule 
		where mid=#{mid} and substring(sDate, 1, 7)=#{ym} 
		group by sDate, part order by sDate; 
	</select>
	
	<select id="getScheduleMenu" resultType="com.spring.springGroupS.vo.ScheduleVO">
		select * from schedule where mid=#{mid} and date_format(sDate, '%Y-%m-%d')=#{ymd};
	</select>
	
	<insert id="setScheduleInputOk">
		insert into schedule values (default, #{vo.mid}, #{vo.ymd}, #{vo.part}, #{vo.content});
	</insert>

</mapper>